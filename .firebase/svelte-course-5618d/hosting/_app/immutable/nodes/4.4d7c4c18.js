import{c as ne,q as ae,l as oe,w as se,g as re,d as ie}from"../chunks/firebase.751a00b5.js";import{H as le}from"../chunks/control.f5b05b5f.js";import{s as ce,C as ue,g as P,c as S,l as C,B as de,h as L,d as T,i as q,m as D,k as j,D as V,E as me}from"../chunks/scheduler.279f2f81.js";import{S as he,i as fe,d as F,p as W,v as _e,e as b,g as _,n as g,a as I,s as X,b as H,c as pe,t as A,j as ge,k as ve,m as be,l as we,h as ke}from"../chunks/index.6fb06d1b.js";import{U as ee,g as Ee,a as ye}from"../chunks/UserLink.4149d8b4.js";function Y(n,e){if(isNaN(n)||n<400||n>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${n} is invalid`);return new le(n,e)}new TextEncoder;const Pe=async({params:n})=>{var c,l;const e=ne(ie,"users"),o=ae(e,se("username","==",n.username),oe(1)),d=await re(o),p=(c=d.docs[0])==null?void 0:c.exists(),t=(l=d.docs[0])==null?void 0:l.data();if(!p)throw Y(404,"that user does not exist!");if(!t.published)throw Y(403,`The profile of @${t.username} is not public!`);return{username:t.username,photoURL:t.photoURL,bio:t.bio,links:t.links??[]}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"})),R="src/routes/[username]/+page.svelte";function Z(n,e,o){const d=n.slice();return d[1]=e[o],d}function z(n){let e,o,d,p;const t=[n[1]];let c={};for(let u=0;u<t.length;u+=1)c=ue(c,t[u]);o=new ee({props:c,$$inline:!0});const l={c:function(){e=P("li"),ge(o.$$.fragment),d=S(),this.h()},l:function(m){e=L(m,"LI",{class:!0});var v=q(e);ve(o.$$.fragment,v),d=T(v),v.forEach(b),this.h()},h:function(){_(e,"class","my-2"),j(e,R,31,4,588)},m:function(m,v){I(m,e,v),be(o,e,null),g(e,d),p=!0},p:function(m,v){const f=v&1?Ee(t,[ye(m[1])]):{};o.$set(f)},i:function(m){p||(H(o.$$.fragment,m),p=!0)},o:function(m){A(o.$$.fragment,m),p=!1},d:function(m){m&&b(e),we(o)}};return F("SvelteRegisterBlock",{block:l,id:z.name,type:"each",source:"(27:4) {#each data.links as item}",ctx:n}),l}function G(n){let e,o,d,p,t,c,l,u=n[0].username+"",m,v,f,$,M,E,x=(n[0].bio??"no bio yet...")+"",B,N,k,w;document.title=e="@"+n[0].username+" Links";let y=W(n[0].links),s=[];for(let h=0;h<y.length;h+=1)s[h]=z(Z(n,y,h));const te=h=>A(s[h],1,1,()=>{s[h]=null}),J={c:function(){o=P("meta"),p=S(),t=P("main"),c=P("h1"),l=C("@"),m=C(u),v=S(),f=P("img"),M=S(),E=P("p"),B=C(x),N=S(),k=P("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){const i=de("svelte-1ui6vuc",document.head);o=L(i,"META",{name:!0,content:!0}),i.forEach(b),p=T(r),t=L(r,"MAIN",{class:!0});var a=q(t);c=L(a,"H1",{class:!0});var U=q(c);l=D(U,"@"),m=D(U,u),U.forEach(b),v=T(a),f=L(a,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),M=T(a),E=L(a,"P",{class:!0});var K=q(E);B=D(K,x),K.forEach(b),N=T(a),k=L(a,"UL",{class:!0});var Q=q(k);for(let O=0;O<s.length;O+=1)s[O].l(Q);Q.forEach(b),a.forEach(b),this.h()},h:function(){_(o,"name","description"),_(o,"content",d=n[0].bio),j(o,R,10,2,158),_(c,"class","text-5xl text-purple-500 pb-3"),j(c,R,16,2,271),V(f.src,$=n[0].photoURL??"/user.png")||_(f,"src",$),_(f,"alt","photoURL"),_(f,"width","256"),_(f,"height","256"),_(f,"class","mx-auto"),j(f,R,20,2,346),_(E,"class","text-xl my-8"),j(E,R,28,2,470),_(k,"class","list-none"),j(k,R,29,2,530),_(t,"class","prose text-center mx-auto mt-8"),j(t,R,14,0,222)},m:function(r,i){g(document.head,o),I(r,p,i),I(r,t,i),g(t,c),g(c,l),g(c,m),g(t,v),g(t,f),g(t,M),g(t,E),g(E,B),g(t,N),g(t,k);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(k,null);w=!0},p:function(r,[i]){if((!w||i&1)&&e!==(e="@"+r[0].username+" Links")&&(document.title=e),(!w||i&1&&d!==(d=r[0].bio))&&_(o,"content",d),(!w||i&1)&&u!==(u=r[0].username+"")&&X(m,u),(!w||i&1&&!V(f.src,$=r[0].photoURL??"/user.png"))&&_(f,"src",$),(!w||i&1)&&x!==(x=(r[0].bio??"no bio yet...")+"")&&X(B,x),i&1){y=W(r[0].links);let a;for(a=0;a<y.length;a+=1){const U=Z(r,y,a);s[a]?(s[a].p(U,i),H(s[a],1)):(s[a]=z(U),s[a].c(),H(s[a],1),s[a].m(k,null))}for(ke(),a=y.length;a<s.length;a+=1)te(a);pe()}},i:function(r){if(!w){for(let i=0;i<y.length;i+=1)H(s[i]);w=!0}},o:function(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)A(s[i]);w=!1},d:function(r){r&&(b(p),b(t)),b(o),me(s,r)}};return F("SvelteRegisterBlock",{block:J,id:G.name,type:"component",source:"",ctx:n}),J}function Le(n,e,o){let{$$slots:d={},$$scope:p}=e;_e("Page",d,[]);let{data:t}=e;n.$$.on_mount.push(function(){t===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const c=["data"];return Object.keys(e).forEach(l=>{!~c.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),n.$$set=l=>{"data"in l&&o(0,t=l.data)},n.$capture_state=()=>({UserLink:ee,data:t}),n.$inject_state=l=>{"data"in l&&o(0,t=l.data)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[t]}class qe extends he{constructor(e){super(e),fe(this,e,Le,G,ce,{data:0}),F("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{qe as component,Te as universal};
