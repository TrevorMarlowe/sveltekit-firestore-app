import{c as le,q as ce,l as ue,w as fe,g as de,d as he,b as Z,u as $,G as me,s as _e,e as ee}from"../chunks/firebase.40f557c4.js";import{H as pe}from"../chunks/control.f5b05b5f.js";import{s as ge,v as ve,p as be,C as we,g as y,c as U,l as z,B as ke,h as P,d as O,i as B,m as W,k as L,D as te,E as Ee,z as ye,w as Pe}from"../chunks/scheduler.279f2f81.js";import{S as Le,i as Re,d as H,p as ne,v as Se,e as w,g as p,n as v,a as D,s as se,b as N,c as je,t as F,j as Te,k as Ue,m as Oe,l as qe,q as Be,h as Ce}from"../chunks/index.dfd36af1.js";import{U as ie,g as xe,a as Ne}from"../chunks/UserLink.669961c9.js";function ae(t,e){if(isNaN(t)||t<400||t>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${t} is invalid`);return new pe(t,e)}new TextEncoder;const De=async({params:t})=>{var i,d;const e=le(he,"users"),o=ce(e,fe("username","==",t.username),ue(1)),c=await de(o),h=(i=c.docs[0])==null?void 0:i.exists(),n=(d=c.docs[0])==null?void 0:d.data();if(!h)throw ae(404,"that user does not exist!");if(!n.published)throw ae(403,`The profile of @${n.username} is not public!`);return{username:n.username,photoURL:n.photoURL,bio:n.bio,links:n.links??[]}},ze=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"})),R="src/routes/[username]/+page.svelte";function oe(t,e,o){const c=t.slice();return c[3]=e[o],c}function J(t){let e,o,c,h;const n=[t[3]];let i={};for(let f=0;f<n.length;f+=1)i=we(i,n[f]);o=new ie({props:i,$$inline:!0});const d={c:function(){e=y("li"),Te(o.$$.fragment),c=U(),this.h()},l:function(a){e=P(a,"LI",{class:!0});var b=B(e);Ue(o.$$.fragment,b),c=O(b),b.forEach(w),this.h()},h:function(){p(e,"class","my-2"),L(e,R,39,4,829)},m:function(a,b){D(a,e,b),Oe(o,e,null),v(e,c),h=!0},p:function(a,b){const g=b&1?xe(n,[Ne(a[3])]):{};o.$set(g)},i:function(a){h||(N(o.$$.fragment,a),h=!0)},o:function(a){F(o.$$.fragment,a),h=!1},d:function(a){a&&w(e),qe(o)}};return H("SvelteRegisterBlock",{block:d,id:J.name,type:"each",source:"(33:4) {#each data.links as item}",ctx:t}),d}function K(t){let e,o="Sign out",c,h;const n={c:function(){e=y("button"),e.textContent=o,this.h()},l:function(d){e=P(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-iuh9xu"&&(e.textContent=o),this.h()},h:function(){p(e,"class","btn btn-warning"),L(e,R,46,4,927)},m:function(d,f){D(d,e,f),c||(h=Be(e,"click",t[2],!1,!1,!1,!1),c=!0)},p:Pe,d:function(d){d&&w(e),c=!1,h()}};return H("SvelteRegisterBlock",{block:n,id:K.name,type:"if",source:"(40:2) {#if $user}",ctx:t}),n}function Q(t){let e,o,c,h,n,i,d,f=t[0].username+"",a,b,g,C,I,S,q=(t[0].bio??"no bio yet...")+"",x,M,E,A,k;document.title=e="@"+t[0].username+" Links";let j=ne(t[0].links),l=[];for(let _=0;_<j.length;_+=1)l[_]=J(oe(t,j,_));const re=_=>F(l[_],1,1,()=>{l[_]=null});let m=t[1]&&K(t);const V={c:function(){o=y("meta"),h=U(),n=y("main"),i=y("h1"),d=z("@"),a=z(f),b=U(),g=y("img"),I=U(),S=y("p"),x=z(q),M=U(),E=y("ul");for(let r=0;r<l.length;r+=1)l[r].c();A=U(),m&&m.c(),this.h()},l:function(r){const u=ke("svelte-1ui6vuc",document.head);o=P(u,"META",{name:!0,content:!0}),u.forEach(w),h=O(r),n=P(r,"MAIN",{class:!0});var s=B(n);i=P(s,"H1",{class:!0});var T=B(i);d=W(T,"@"),a=W(T,f),T.forEach(w),b=O(s),g=P(s,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),I=O(s),S=P(s,"P",{class:!0});var X=B(S);x=W(X,q),X.forEach(w),M=O(s),E=P(s,"UL",{class:!0});var Y=B(E);for(let G=0;G<l.length;G+=1)l[G].l(Y);Y.forEach(w),A=O(s),m&&m.l(s),s.forEach(w),this.h()},h:function(){p(o,"name","description"),p(o,"content",c=t[0].bio),L(o,R,18,2,399),p(i,"class","text-5xl text-purple-500 pb-3"),L(i,R,24,2,512),te(g.src,C=t[0].photoURL??"/user.png")||p(g,"src",C),p(g,"alt","photoURL"),p(g,"width","256"),p(g,"height","256"),p(g,"class","mx-auto"),L(g,R,28,2,587),p(S,"class","text-xl my-8"),L(S,R,36,2,711),p(E,"class","list-none"),L(E,R,37,2,771),p(n,"class","prose text-center mx-auto mt-8"),L(n,R,22,0,463)},m:function(r,u){v(document.head,o),D(r,h,u),D(r,n,u),v(n,i),v(i,d),v(i,a),v(n,b),v(n,g),v(n,I),v(n,S),v(S,x),v(n,M),v(n,E);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(E,null);v(n,A),m&&m.m(n,null),k=!0},p:function(r,[u]){if((!k||u&1)&&e!==(e="@"+r[0].username+" Links")&&(document.title=e),(!k||u&1&&c!==(c=r[0].bio))&&p(o,"content",c),(!k||u&1)&&f!==(f=r[0].username+"")&&se(a,f),(!k||u&1&&!te(g.src,C=r[0].photoURL??"/user.png"))&&p(g,"src",C),(!k||u&1)&&q!==(q=(r[0].bio??"no bio yet...")+"")&&se(x,q),u&1){j=ne(r[0].links);let s;for(s=0;s<j.length;s+=1){const T=oe(r,j,s);l[s]?(l[s].p(T,u),N(l[s],1)):(l[s]=J(T),l[s].c(),N(l[s],1),l[s].m(E,null))}for(Ce(),s=j.length;s<l.length;s+=1)re(s);je()}r[1]?m?m.p(r,u):(m=K(r),m.c(),m.m(n,null)):m&&(m.d(1),m=null)},i:function(r){if(!k){for(let u=0;u<j.length;u+=1)N(l[u]);k=!0}},o:function(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)F(l[u]);k=!1},d:function(r){r&&(w(h),w(n)),w(o),Ee(l,r),m&&m.d()}};return H("SvelteRegisterBlock",{block:V,id:Q.name,type:"component",source:"",ctx:t}),V}function He(t,e,o){let c;ve($,"user"),be(t,$,a=>o(1,c=a));let{$$slots:h={},$$scope:n}=e;Se("Page",h,[]);let{data:i}=e;async function d(){await fetch("/api/signin",{method:"DELETE"}),await ee(Z)}t.$$.on_mount.push(function(){i===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const f=["data"];return Object.keys(e).forEach(a=>{!~f.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Page> was created with unknown prop '${a}'`)}),t.$$set=a=>{"data"in a&&o(0,i=a.data)},t.$capture_state=()=>({UserLink:ie,auth:Z,user:$,GoogleAuthProvider:me,signInWithPopup:_e,signOut:ee,data:i,signOutSSR:d,$user:c}),t.$inject_state=a=>{"data"in a&&o(0,i=a.data)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[i,c,d]}class We extends Le{constructor(e){super(e),Re(this,e,He,Q,ge,{data:0}),H("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Q.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{We as component,ze as universal};
