import{s as ae,v as V,p as J,g as w,c as C,l as ne,h as R,z as I,d as P,i as E,m as oe,k as U,D as K}from"../chunks/scheduler.279f2f81.js";import{S as le,i as ie,d as D,v as re,j as ce,k as ue,m as fe,b as me,t as pe,l as he,e as p,g as r,a as L,n as y,q as de}from"../chunks/index.dfd36af1.js";import{A as te}from"../chunks/AuthCheck.0c0287a4.js";import{u as q,a as F,m as Q,d as W,h as X,j as Y,n as Z,r as $,o as ee}from"../chunks/firebase.441e80f6.js";const k="src/routes/login/photo/+page.svelte";function N(o){let e,i="Uploading...",u,s;const t={c:function(){e=w("p"),e.textContent=i,u=C(),s=w("progress"),this.h()},l:function(c){e=R(c,"P",{"data-svelte-h":!0}),I(e)!=="svelte-be0b5h"&&(e.textContent=i),u=P(c),s=R(c,"PROGRESS",{class:!0}),E(s).forEach(p),this.h()},h:function(){U(e,k,46,4,1369),r(s,"class","progress progress-info w-56 mt-6"),U(s,k,47,4,1393)},m:function(c,h){L(c,e,h),L(c,u,h),L(c,s,h)},d:function(c){c&&(p(e),p(u),p(s))}};return D("SvelteRegisterBlock",{block:t,id:N.name,type:"if",source:"(42:3) {#if uploading}",ctx:o}),t}function se(o){let e,i="Upload a Profile Photo",u,s,t,a,c,h,m,g,A="Pick a file",l,d,j,x,_,B,O,M,f=o[2]&&N(o);const z={c:function(){e=w("h2"),e.textContent=i,u=C(),s=w("form"),t=w("div"),a=w("img"),h=C(),m=w("label"),g=w("span"),g.textContent=A,l=C(),d=w("input"),j=C(),f&&f.c(),x=C(),_=w("a"),B=ne("Finish"),this.h()},l:function(n){e=R(n,"H2",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-1whglfv"&&(e.textContent=i),u=P(n),s=R(n,"FORM",{class:!0});var v=E(s);t=R(v,"DIV",{class:!0});var b=E(t);a=R(b,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),h=P(b),m=R(b,"LABEL",{for:!0,class:!0});var H=E(m);g=R(H,"SPAN",{class:!0,"data-svelte-h":!0}),I(g)!=="svelte-1xba4c3"&&(g.textContent=A),H.forEach(p),l=P(b),d=R(b,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),j=P(b),f&&f.l(b),b.forEach(p),v.forEach(p),x=P(n),_=R(n,"A",{href:!0,class:!0});var T=E(_);B=oe(T,"Finish"),T.forEach(p),this.h()},h:function(){var n;r(e,"class","card-title"),U(e,k,25,1,745),K(a.src,c=o[1]??((n=o[0])==null?void 0:n.photoURL)??"/user.png")||r(a,"src",c),r(a,"alt","photoURL"),r(a,"width","256"),r(a,"height","256"),r(a,"class","mx-auto"),U(a,k,28,3,909),r(g,"class","label-text"),U(g,k,36,4,1097),r(m,"for","photoURL"),r(m,"class","label"),U(m,k,35,3,1056),r(d,"name","photoURL"),r(d,"type","file"),r(d,"class","file-input file-input-bordered w-full max-w-xs"),r(d,"accept","image/png, image/jpeg, image/gif, image/webp"),U(d,k,38,3,1156),r(t,"class","from-control w-full max-w-xs my-10 mx-auto text-center"),U(t,k,27,2,837),r(s,"class","max-w-screen-md w-full"),U(s,k,26,1,797),r(_,"href",o[3]),r(_,"class","btn btn-primary"),U(_,k,52,1,1476)},m:function(n,v){L(n,e,v),L(n,u,v),L(n,s,v),y(s,t),y(t,a),y(t,h),y(t,m),y(m,g),y(t,l),y(t,d),y(t,j),f&&f.m(t,null),L(n,x,v),L(n,_,v),y(_,B),O||(M=de(d,"change",o[4],!1,!1,!1,!1),O=!0)},p:function(n,v){var b;v&3&&!K(a.src,c=n[1]??((b=n[0])==null?void 0:b.photoURL)??"/user.png")&&r(a,"src",c),n[2]?f||(f=N(n),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&r(_,"href",n[3])},d:function(n){n&&(p(e),p(u),p(s),p(x),p(_)),f&&f.d(),O=!1,M()}};return D("SvelteRegisterBlock",{block:z,id:se.name,type:"slot",source:"(21:0) <AuthCheck>",ctx:o}),z}function G(o){let e,i;e=new te({props:{$$slots:{default:[se]},$$scope:{ctx:o}},$$inline:!0});const u={c:function(){ce(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,a){fe(e,t,a),i=!0},p:function(t,[a]){const c={};a&79&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i:function(t){i||(me(e.$$.fragment,t),i=!0)},o:function(t){pe(e.$$.fragment,t),i=!1},d:function(t){he(e,t)}};return D("SvelteRegisterBlock",{block:u,id:G.name,type:"component",source:"",ctx:o}),u}function _e(o,e,i){let u,s,t;V(q,"user"),J(o,q,l=>i(5,s=l)),V(F,"userData"),J(o,F,l=>i(0,t=l));let{$$slots:a={},$$scope:c}=e;re("Page",a,[]);let h,m=!1;async function g(l){i(2,m=!0);const d=l.target.files[0];i(1,h=URL.createObjectURL(d));const j=$(Q,`users/${s.uid}/profile.png`),x=await ee(j,d),_=await Z(x.ref);await Y(X(W,"users",s.uid),{photoURL:_}),i(2,m=!1)}const A=[];return Object.keys(e).forEach(l=>{!~A.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),o.$capture_state=()=>({AuthCheck:te,user:q,userData:F,storage:Q,db:W,doc:X,updateDoc:Y,getDownloadURL:Z,ref:$,uploadBytes:ee,previewURL:h,uploading:m,upload:g,href:u,$user:s,$userData:t}),o.$inject_state=l=>{"previewURL"in l&&i(1,h=l.previewURL),"uploading"in l&&i(2,m=l.uploading),"href"in l&&i(3,u=l.href)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&i(3,u=`/${t==null?void 0:t.username}`)},[t,h,m,u,g]}class Re extends le{constructor(e){super(e),ie(this,e,_e,G,ae,{}),D("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}}export{Re as component};
