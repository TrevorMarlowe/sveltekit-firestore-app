import{c as le,q as ce,l as ue,w as fe,g as de,d as he,b as Z,u as V,s as ee}from"../chunks/firebase.441e80f6.js";import{H as me}from"../chunks/control.f5b05b5f.js";import{s as _e,v as pe,p as ge,C as ve,g as L,c as O,l as I,B as be,h as R,d as q,i as C,m as M,k as S,D as te,E as we,z as ke}from"../chunks/scheduler.279f2f81.js";import{S as Ee,i as ye,d as z,p as ne,v as Pe,e as k,g as d,n as m,a as x,s as ae,b as $,c as Le,t as F,j as Re,k as Se,m as je,l as Te,q as Ue,h as Be}from"../chunks/index.dfd36af1.js";import{U as re,g as Oe,a as qe}from"../chunks/UserLink.669961c9.js";function se(t,e){if(isNaN(t)||t<400||t>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${t} is invalid`);return new me(t,e)}new TextEncoder;const Ce=async({params:t})=>{var o,g;const e=le(he,"users"),n=ce(e,fe("username","==",t.username),ue(1)),u=await de(n),_=(o=u.docs[0])==null?void 0:o.exists(),a=(g=u.docs[0])==null?void 0:g.data();if(!_)throw se(404,"that user does not exist!");if(!a.published)throw se(403,`The profile of @${a.username} is not public!`);return{username:a.username,photoURL:a.photoURL,bio:a.bio,links:a.links??[]}},$e=Object.freeze(Object.defineProperty({__proto__:null,load:Ce},Symbol.toStringTag,{value:"Module"})),j="src/routes/[username]/+page.svelte";function oe(t,e,n){const u=t.slice();return u[3]=e[n],u}function J(t){let e,n,u,_;const a=[t[3]];let o={};for(let l=0;l<a.length;l+=1)o=ve(o,a[l]);n=new re({props:o,$$inline:!0});const g={c:function(){e=L("li"),Re(n.$$.fragment),u=O(),this.h()},l:function(s){e=R(s,"LI",{class:!0});var h=C(e);Se(n.$$.fragment,h),u=q(h),h.forEach(k),this.h()},h:function(){d(e,"class","my-2"),S(e,j,40,4,815)},m:function(s,h){x(s,e,h),je(n,e,null),m(e,u),_=!0},p:function(s,h){const p=h&1?Oe(a,[qe(s[3])]):{};n.$set(p)},i:function(s){_||($(n.$$.fragment,s),_=!0)},o:function(s){F(n.$$.fragment,s),_=!1},d:function(s){s&&k(e),Te(n)}};return z("SvelteRegisterBlock",{block:g,id:J.name,type:"each",source:"(34:4) {#each data.links as item}",ctx:t}),g}function K(t){let e,n,u,_,a,o,g,l,s,h,p="Sign out",B,N;const T={c:function(){e=L("div"),n=L("a"),u=I("Edit Profile"),a=O(),o=L("a"),g=I("Edit Bio"),s=O(),h=L("button"),h.textContent=p,this.h()},l:function(E){e=R(E,"DIV",{class:!0});var b=C(e);n=R(b,"A",{href:!0,class:!0});var P=C(n);u=M(P,"Edit Profile"),P.forEach(k),a=q(b),o=R(b,"A",{href:!0,class:!0});var A=C(o);g=M(A,"Edit Bio"),A.forEach(k),s=q(b),h=R(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(h)!=="svelte-iuh9xu"&&(h.textContent=p),b.forEach(k),this.h()},h:function(){d(n,"href",_="/"+t[0].username+"/edit"),d(n,"class","btn btn-primary"),S(n,j,48,4,934),d(o,"href",l="/"+t[0].username+"/bio"),d(o,"class","btn btn-primary"),S(o,j,49,4,1011),d(h,"class","btn btn-warning"),S(h,j,50,4,1083),d(e,"class","my-8"),S(e,j,47,2,911)},m:function(E,b){x(E,e,b),m(e,n),m(n,u),m(e,a),m(e,o),m(o,g),m(e,s),m(e,h),B||(N=Ue(h,"click",t[2],!1,!1,!1,!1),B=!0)},p:function(E,b){b&1&&_!==(_="/"+E[0].username+"/edit")&&d(n,"href",_),b&1&&l!==(l="/"+E[0].username+"/bio")&&d(o,"href",l)},d:function(E){E&&k(e),B=!1,N()}};return z("SvelteRegisterBlock",{block:T,id:K.name,type:"if",source:"(41:2) {#if $user}",ctx:t}),T}function Q(t){let e,n,u,_,a,o,g,l=t[0].username+"",s,h,p,B,N,T,y=(t[0].bio??"no bio yet...")+"",E,b,P,A,U;document.title=e="@"+t[0].username+" Links";let D=ne(t[0].links),c=[];for(let w=0;w<D.length;w+=1)c[w]=J(oe(t,D,w));const ie=w=>F(c[w],1,1,()=>{c[w]=null});let v=t[1]&&K(t);const W={c:function(){n=L("meta"),_=O(),a=L("main"),o=L("h1"),g=I("@"),s=I(l),h=O(),p=L("img"),N=O(),T=L("p"),E=I(y),b=O(),P=L("ul");for(let i=0;i<c.length;i+=1)c[i].c();A=O(),v&&v.c(),this.h()},l:function(i){const f=be("svelte-1ui6vuc",document.head);n=R(f,"META",{name:!0,content:!0}),f.forEach(k),_=q(i),a=R(i,"MAIN",{class:!0});var r=C(a);o=R(r,"H1",{class:!0});var H=C(o);g=M(H,"@"),s=M(H,l),H.forEach(k),h=q(r),p=R(r,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),N=q(r),T=R(r,"P",{class:!0});var X=C(T);E=M(X,y),X.forEach(k),b=q(r),P=R(r,"UL",{class:!0});var Y=C(P);for(let G=0;G<c.length;G+=1)c[G].l(Y);Y.forEach(k),A=q(r),v&&v.l(r),r.forEach(k),this.h()},h:function(){d(n,"name","description"),d(n,"content",u=t[0].bio),S(n,j,19,2,385),d(o,"class","text-5xl text-purple-500 pb-3"),S(o,j,25,2,498),te(p.src,B=t[0].photoURL??"/user.png")||d(p,"src",B),d(p,"alt","photoURL"),d(p,"width","256"),d(p,"height","256"),d(p,"class","mx-auto"),S(p,j,29,2,573),d(T,"class","text-xl my-8"),S(T,j,37,2,697),d(P,"class","list-none"),S(P,j,38,2,757),d(a,"class","prose text-center mx-auto mt-8"),S(a,j,23,0,449)},m:function(i,f){m(document.head,n),x(i,_,f),x(i,a,f),m(a,o),m(o,g),m(o,s),m(a,h),m(a,p),m(a,N),m(a,T),m(T,E),m(a,b),m(a,P);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(P,null);m(a,A),v&&v.m(a,null),U=!0},p:function(i,[f]){if((!U||f&1)&&e!==(e="@"+i[0].username+" Links")&&(document.title=e),(!U||f&1&&u!==(u=i[0].bio))&&d(n,"content",u),(!U||f&1)&&l!==(l=i[0].username+"")&&ae(s,l),(!U||f&1&&!te(p.src,B=i[0].photoURL??"/user.png"))&&d(p,"src",B),(!U||f&1)&&y!==(y=(i[0].bio??"no bio yet...")+"")&&ae(E,y),f&1){D=ne(i[0].links);let r;for(r=0;r<D.length;r+=1){const H=oe(i,D,r);c[r]?(c[r].p(H,f),$(c[r],1)):(c[r]=J(H),c[r].c(),$(c[r],1),c[r].m(P,null))}for(Be(),r=D.length;r<c.length;r+=1)ie(r);Le()}i[1]?v?v.p(i,f):(v=K(i),v.c(),v.m(a,null)):v&&(v.d(1),v=null)},i:function(i){if(!U){for(let f=0;f<D.length;f+=1)$(c[f]);U=!0}},o:function(i){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)F(c[f]);U=!1},d:function(i){i&&(k(_),k(a)),k(n),we(c,i),v&&v.d()}};return z("SvelteRegisterBlock",{block:W,id:Q.name,type:"component",source:"",ctx:t}),W}function De(t,e,n){let u;pe(V,"user"),ge(t,V,s=>n(1,u=s));let{$$slots:_={},$$scope:a}=e;Pe("Page",_,[]);let{data:o}=e;async function g(){await fetch("/api/signin",{method:"DELETE"}),await ee(Z),location.href="/"}t.$$.on_mount.push(function(){o===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const l=["data"];return Object.keys(e).forEach(s=>{!~l.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<Page> was created with unknown prop '${s}'`)}),t.$$set=s=>{"data"in s&&n(0,o=s.data)},t.$capture_state=()=>({UserLink:re,auth:Z,user:V,signOut:ee,data:o,signOutSSR:g,$user:u}),t.$inject_state=s=>{"data"in s&&n(0,o=s.data)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[o,u,g]}class xe extends Ee{constructor(e){super(e),ye(this,e,De,Q,_e,{data:0}),z("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Q.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{xe as component,$e as universal};
